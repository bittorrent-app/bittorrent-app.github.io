{"componentChunkName":"component---src-templates-blog-blog-post-js","path":"/blog/2015/08/11/bleep-update-forward-secrecy-for-offline-messages","result":{"data":{"allWordpressPost":{"edges":[{"node":{"title":"Bleep update: Forward Secrecy for Offline Messages","content":"<p>Our engineers have recently updated the <a href=\"https://blog.bittorrent.com/2015/05/12/bleep-private-messenger-now-on-all-major-platforms/\">Bleep</a> core engine to address offline forward secrecy.</p>\n<p>We’ve discussed <a href=\"https://www.google.com/url?q=http%3A%2F%2Fbittorrent.gyre.wpengine.com%2F2014%2F12%2F22%2Fexploring-forward-secrecy-in-bleep%2F&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEIUCJ38wIoDnFyhGt9lp_iRExWvw\">forward secrecy</a> before, but this is a major overhaul to the fundamental way we package and transmit messages.</p>\n<p>It also introduces something that no one else has figured out how to do (as far as we know): providing forward secrecy in messages that don’t have to be delivered in real-time (offline) and crucially, without a server. Others offer all of this, but none using distributed technology and without a server.</p>\n<p><!--more--></p>\n<p>Here is a link to our <a href=\"https://engineering.gyre.wpengine.com/2015/08/06/forward-secrecy-for-offline-messages-in-bleep/\">Engineering Blog with the full post</a> discussing this update and we share the full text below.</p>\n<h2><strong>Forward secrecy for offline messages in Bleep</strong></h2>\n<p><em>by Steven Siloti</em></p>\n<p>Our initial implementation of asynchronous offline messaging in Bleep[1] used an encryption scheme which provided authentication and confidentiality, but not forward secrecy[2]. This meant that if the private key of Alice or Bob was compromised, Eve could use the key to decrypt any of their offline messages she had previously captured.</p>\n\n\n<p>Providing forward secrecy for offline messages is not as straightforward as it is for messages sent when both Alice and Bob are online. For the latter, forward secrecy is provided as part of our encrypted tunnel protocol. If either Alice or Bob is offline a tunnel cannot be established. Thus for offline messages we must find an alternative method of providing forward secrecy.</p>\n<p>A key element of forward secrecy is the use of ephemeral keys. Ephemeral keys are used for some short period of time then discarded. Once a key is discarded any data encrypted with it cannot be decrypted ever again. Our encrypted tunnel protocol generates new ephemeral keypairs for every connection and exchanges the public component of them as part of the handshake used to establish the connection. Of course this handshaking only works if Alice and Bob are both online, so how can they exchange ephemeral keys when one of them is offline?</p>\n<p>Happily, the same DHT facility we use to exchange offline messages can also be used to exchange ephemeral keys. When Alice and Bob first add each other as contacts they generate ephemeral keypairs and publish the keys’ public components in the DHT, just as they would an offline message. Alice and Bob save each other’s offline ephemeral keys for future use. When Alice wants to send an offline message to Bob she uses their saved ephemeral keys to encrypt the message. When Bob receives the message he uses his copy of the ephemeral keys to decrypt it. After decrypting the message, Bob discards his ephemeral key and publishes a new one in the DHT. Once Alice sees Bob’s new ephemeral key she replaces the one she has stored for him.</p>\n<p>One downside of this scheme is that the granularity with which messages are rendered indecipherable is larger than when using our encrypted tunnels. There are multiple factors which make this reduced granularity unavoidable. The structure of data stored in the DHT means that messages can only be received in last-in-first-out order. This means that if we were to ratchet the key between each message, as we do for encrypted tunnels, a recipient would not be able to decrypt a list of messages until the entire list was received. This would defeat the point of ratcheting so we do not use it for offline messages. Of course, the asynchronous nature of offline messages requires allowing Alice to encrypt any number of messages without receiving a new ephemeral key from Bob. For lack of a better option we simply reuse the same key for every message until a new ephemeral key is received. Thus forward secrecy is only maintained up to the last time Alice and Bob managed to exchange ephemeral keys via the DHT.</p>\n<p>[1] https://engineering.gyre.wpengine.com/2014/12/22/bleep-now-supports-asynchronous-offline-messaging/<br />\n[2] https://engineering.gyre.wpengine.com/2014/12/11/authentication-and-forward-secrecy-in-bleep/</p>\n<p><em>Steven Siloti is a senior software engineer and DHT specialist on the Bleep development team.</em></p>\n","date":"2015/08/11","featured_media":{"source_url":"https://blog.bittorrent.com/files/2015/08/man-field-smartphone-yellow-sm_16x8-og.png"}}}]}},"pageContext":{"meta":{"title":"Bleep update: Forward Secrecy for Offline Messages","description":"<p>Our engineers have recently updated the Bleep core engine to address offline forward secrecy. We’ve discussed forward secrecy before, but this is a major overhaul to the fundamental way we package and transmit messages. It also introduces something that no one else has figured out how to do (as far as we know): providing forward&#8230;</p>\n","keywords":"bittorrent, BitTorrent, torrent, bittorrent, client, windows, mac, osx"},"slug":"bleep-update-forward-secrecy-for-offline-messages","unlocalizedPath":"/blog/2015/08/11/bleep-update-forward-secrecy-for-offline-messages","locale":"en","navText":{"Try µTorrent Lite for iOS-iPad.":"Try ${liteLogo} for iOS-iPad.","Try µTorrent Lite":"Try ${liteLogo}","Buy BTT":"","Exchanges Listing BTT":"","View All Exchanges":"","View All":"","Crypto":"","Help":"Help","Products":"Products","Get Content":"Get Content","Token":"Token","Language":"Language","Online torrent downloader and player.":"Online torrent downloader and player.","Free":"Free","Premium":"Premium","The original desktop torrent client.":"The original desktop torrent client.","The best web torrent client for Mac.":"The best web torrent client for Mac.","The original torrent downloader for Android.":"The original torrent downloader for Android.","Live Broadcasting":"Live Broadcasting","Create or watch live broadcasts.":"Create or watch live broadcasts.","Learn More":"Learn More","Content Utility":"Content Utility","Access BitTorrent Classic from anywhere.":"Access BitTorrent Classic from anywhere.","Login":"Login","Learn about BTT use cases.":"Learn about BTT use cases.","Get faster downloads, earn for seeding.":"Get faster downloads, earn for seeding.","Store and share digital content.":"Store and share digital content.","Your purchase of digital coins via credit card is facilitated by a third party service provider, Simplex Payment Services UAB.":"Your purchase of digital coins via credit card is facilitated by a third party service provider, Simplex Payment Services UAB.","BitTorrent does not facilitate this transaction and expressly disclaims all warranties related to this third party service.":"BitTorrent does not facilitate this transaction and expressly disclaims all warranties related to this third party service.","The crypto amount quoted is based on the current rate and is not final.":"The crypto amount quoted is based on the current rate and is not final.","If the rate changes by more than +/-2.5% you will be asked to reconfirm the transaction via email from Simplex.":"If the rate changes by more than +/-2.5% you will be asked to reconfirm the transaction via email from Simplex.","BTT is not available for direct purchase from all geographic locations.":"BTT is not available for direct purchase from all geographic locations.","If you have any questions, please contact Simplex customer support at support@simplex.com.":"If you have any questions, please contact Simplex customer support at support@simplex.com.","Please read the above and check the box to continue":"Please read the above and check the box to continue","I have read and accept the terms of this purchase.":"I have read and accept the terms of this purchase."},"footerText":{"Language":"Language","Downloads":"Downloads","Windows":"Windows","Mac":"Mac","Android":"Android","Linux":"Linux","Platforms":"Platforms","Company":"Company","About":"About","Contact":"Contact","Press":"Press","Jobs":"Jobs","Advertise":"Advertise","EULA":"EULA","Copyright":"Copyright","termsOfUse":"Terms of Use","nowTermsOfUse":"Now Terms","Privacy":"Privacy","Privacy Preferences":"Privacy Preferences","Support":"Support","Help":"Help","Forum":"Forum","All Rights Reserved":"All Rights Reserved"},"androidBannerText":{"Get the official Android App":"Get the official Android App","FREE on Google Play Store!":"FREE on the Google Play Store!"},"modifiedTime":"2015/08/11"}},"staticQueryHashes":["1082582189","2794733127"]}